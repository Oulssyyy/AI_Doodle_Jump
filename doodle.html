<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doodle</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <audio id="ost-secret" loop></audio>

    <div id="ai-container">

    </div>

    <div class="container" id="normal-container">
        <canvas id="my_canvas" width="300" height="600"></canvas>
        <!-- <div class="btn" id="play-btn">
            Play
        </div>
        <div class="btn" id="restart-btn">
            Restart
        </div> -->

        <div class="btn" id="mute-btn">Mute</div>
    </div>
    <div class="chartContainer">
        <div id="chart_div" style="width: 100%; height: 500px;"></div>
    </div>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script defer type="module">
        // AI PART /!\
        import { GeneticAlgorithm } from './geneticAlgorithm.js';

        // google.charts.load('current', { packages: ['corechart'] });
        // google.charts.setOnLoadCallback(initChart);

        // let data;
        // let chart;
        // let options;

        // function initChart() {
        //     data = new google.visualization.DataTable();
        //     data.addColumn('number', 'Génération');
        //     data.addColumn('number', 'Meilleur Score');

        //     options = {
        //         title: 'Évolution du Meilleur Score par Génération',
        //         hAxis: {
        //             title: 'Génération',
        //             minValue: 0, 
        //             gridlines: { color: '#ccc' }
        //         },
        //         vAxis: {
        //             title: 'Score',
        //             minValue: 0,
        //             gridlines: { color: '#ccc' }
        //         },
        //         curveType: 'function', // Courbe lissée
        //         legend: { position: 'bottom' },
        //         chartArea: { left: 50, top: 50, width: '75%', height: '70%' } // Ajuste l'espace du graphique
        //     };

        //     chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        //     chart.draw(data, options);
        // }

        // function updateChart(bestScores) {
        //     console.log(bestScores);
        //     //data.removeRows(0, data.getNumberOfRows()); // Nettoyer les anciennes données
        //     // data.addRows(bestScores); // Ajouter les nouvelles données
        //     // chart.draw(data, options); // Redessiner le graphique
        // }


        const gen = new GeneticAlgorithm(40, 5, ()=>{});
        gen.StartLearning();


        
        // sans AI /!\

        // import { Controller, AIController } from './controller.js';
        // import { Bot, NetworkLayer } from './ai.js';
        // import Model from './model.js';
        // import { View, AIView } from './vue.js';
        // import randMinMax from './util.js';

        // const audio = document.getElementById('ost-secret');
        // const muteBtn = document.getElementById('mute-btn');
        // const playBtn = document.getElementById('play-btn');

        // audio.src = './assets/song/' + ((t) => t[randMinMax(0, t.length - 1)])([
        //     'ost-op'
        // ]) + '.mp3';
        
        // const urlParams = new URLSearchParams(window.location.search);

        // if (urlParams.get('mode') === 'china') {
        //     ('china');
        //     audio.src = './assets/song/ost-mao.mp3';
        //     playBtn.textContent = '播放';
        // }

        // muteBtn.addEventListener('click', () => {
        //     muteBtn.classList.toggle('muted');

        //     if (muteBtn.classList.contains('muted')) {
        //         audio.volume = 0;
        //     } else {
        //         audio.volume = 1;
        //     }
        // })

        // const model = new Model();
        // const bot = new Bot(model);


        // const app = new Controller(model, new View(), bot);
        // playBtn.addEventListener('click', () => {
        //     app.Update();
        //     audio.play();
        // })

        // document.getElementById('restart-btn').addEventListener('click', () => {
        //     app.Restart(new Model(), new View());
        // })

    </script>
</body>
</html>